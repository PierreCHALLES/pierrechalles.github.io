// Jeu de karting en HTML5 Canvas + JavaScript

// Création du canvas en plein écran
const canvas = document.createElement("canvas");
const ctx = canvas.getContext("2d");
document.body.appendChild(canvas);
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Chargement des images (kart, circuit...)
const kartImg = new Image();
kartImg.src = "kart.png";

// Définition du joueur
const player = {
    x: 100,
    y: 100,
    speed: 0,
    angle: 0,
    acceleration: 0.1,
    maxSpeed: 5,
    friction: 0.05
};

// Gestion des touches
const keys = {};
window.addEventListener("keydown", (e) => keys[e.key] = true);
window.addEventListener("keyup", (e) => keys[e.key] = false);

// Mise à jour du joueur
function updatePlayer() {
    if (keys["ArrowUp"]) player.speed += player.acceleration;
    if (keys["ArrowDown"]) player.speed -= player.acceleration;
    if (keys["ArrowLeft"]) player.angle -= 0.05;
    if (keys["ArrowRight"]) player.angle += 0.05;
    
    // Appliquer les limites de vitesse
    player.speed = Math.max(Math.min(player.speed, player.maxSpeed), -player.maxSpeed);
    
    // Mouvement
    player.x += Math.cos(player.angle) * player.speed;
    player.y += Math.sin(player.angle) * player.speed;
    
    // Appliquer friction
    player.speed *= (1 - player.friction);
}

// Affichage du jeu
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Dessiner le kart
    ctx.save();
    ctx.translate(player.x, player.y);
    ctx.rotate(player.angle);
    ctx.drawImage(kartImg, -16, -16, 32, 32);
    ctx.restore();
}

// Boucle du jeu
function gameLoop() {
    updatePlayer();
    draw();
    requestAnimationFrame(gameLoop);
}

kartImg.onload = gameLoop;
